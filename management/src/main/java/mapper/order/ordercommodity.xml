<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="management.ordercommodity">

    <insert id="insert" parameterType="model.order.OrderCommodity">
        INSERT INTO order_commodity
        (commodity_id, order_id, commodity_type, commodity_name, commodity_price,
         commodity_quantity, block_flag, create_time)
         VALUES
         (#{commodityId}, #{orderId}, #{commodityType}, #{commodityName}, #{commodityPrice},
          #{commodityQuantity}, #{blockFlag}, #{createAt})
    </insert>

    <insert id="insertBatch" parameterType="java.util.List">
        INSERT INTO order_commodity
        (commodity_id, order_id, commodity_type, commodity_name, commodity_price,
         commodity_quantity, block_flag, create_time)
         VALUES
         <foreach collection="list" separator="," index="index" item="item">
             (#{item.commodityId}, #{item.orderId}, #{item.commodityType}, #{item.commodityName}, #{item.commodityPrice},
             #{item.commodityQuantity}, #{item.blockFlag}, #{item.createAt})
         </foreach>

    </insert>

    <update id="updateBatch" parameterType="java.util.List">
        <foreach collection="list" separator="," index="index" item="item">
            UPDATE order_commodity
            SET
            <if test="item.commodityType != null">
                commodity_type = #{item.commodityType},
            </if>
            <if test="item.commodityName != null">
                commodity_name = #{item.commodityName},
            </if>
            <if test="item.commodityPrice != null">
                commodity_price = #{item.commodityPrice},
            </if>
            <if test="item.commodityQuantity != null">
                commodity_quantity = #{item.commodityQuantity}
            </if>
            WHERE commodity_id = #{item.commodityId}
        </foreach>
    </update>

    <update id="update" parameterType="model.order.OrderCommodity">
        UPDATE order_commodity
        SET
        <if test="commodityType != null">
            commodity_type = #{commodityType},
        </if>
        <if test="commodityName != null">
            commodity_name = #{commodityName},
        </if>
        <if test="commodityPrice != null">
            commodity_price = #{commodityPrice},
        </if>
        <if test="commodityQuantity != null">
            commodity_quantity = #{commodityQuantity},
        </if>
        WHERE commodity_id = #{commodityId}
    </update>

    <update id="blockcommodity" parameterType="java.util.Map">
        UPDATE order_commodity SET block_flag = 1 WHERE commodity_id = #{commodityId}
    </update>

</mapper>